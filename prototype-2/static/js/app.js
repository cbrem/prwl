// Generated by CoffeeScript 1.9.1
(function() {
  var extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  window.prowl = {
    views: {},
    collections: {},
    models: {},
    events: _.extend({}, Backbone.Events)
  };

  prowl.Router = (function(superClass) {
    extend(Router, superClass);

    function Router() {
      return Router.__super__.constructor.apply(this, arguments);
    }

    Router.prototype.routes = {
      "": "home",
      "about": "about",
      "store": "store"
    };

    Router.prototype.initialize = function() {
      this._viewCache = {};
      return this.view = null;
    };

    Router.prototype._cachedRender = function(name, $el, args, cache) {
      if (this.view != null) {
        this.view.$el.detach();
      }
      if (_.has(this._viewCache, name) && cache) {
        this.view = this._viewCache[name];
      } else {
        this.view = new prowl.views[name](args);
        this.view.render();
        this._viewCache[name] = this.view;
      }
      return $el.append(this.view.$el);
    };

    Router.prototype.home = function() {
      return this._cachedRender('Home', $('#main-anchor'), {});
    };

    Router.prototype.about = function() {
      return this._cachedRender('About', $('#main-anchor'), {});
    };

    Router.prototype.store = function() {
      return this._cachedRender('Store', $('#main-anchor'), {});
    };

    return Router;

  })(Backbone.Router);

  jQuery(function() {
    prowl.router = new prowl.Router();
    return Backbone.history.start();
  });

}).call(this);
